<ion-modal-view id="new-car-modal"
  class="perfil modal modal-new-car" view-title="Nuevo sucursal">
  <div class="bar bar-header bar-dark">
    <h1 class="title">Editar Sucursal</h1>
      <button class="button button-icon button-clear icon-right ion-ios-close"
      id="header-btn" ng-click="cerrarModalSuc()">
      </button>
  </div>
  <ion-content class="has-header">
    <div class="list">
      <div class="item item-divider padding item-icon-right" >
        <h2 class="title nmb">{{mySucursal.business.name}}</h2>
      </div>
    </div>
    <form class="list">
      <!-- street -->
      <label class="item item-input" id="street">
       <span class="input-label">Calle*</span>
       <input type="text" ng-model="establish.street" placeholder="ej. Siempre viva"
       ng-init="establish.street = mySucursal.street">
      </label>

      <!-- number_e -->
      <label class="item item-input" id="number_e">
       <span class="input-label">Nº Ext.*</span>
       <input type="tel" ng-model="establish.number_e" placeholder="ej. 000"
       ng-init="establish.number_e = mySucursal.number_e">
      </label>

      <!-- number_i -->
      <label class="item item-input" id="number_i">
       <span class="input-label">Nº Int.</span>
       <input type="text" ng-model="establish.number_i" maxlength="3" placeholder="ej. 0 ó A"
       ng-init="establish.number_i = mySucursal.number_i">
      </label>

      <!-- neighborhood -->
      <label class="item item-input" id="neighborhood">
       <span class="input-label">Colonia</span>
       <input type="text" ng-model="establish.neighborhood" placeholder="ej. Balcones del Valle"
       ng-init="establish.neighborhood = mySucursal.neighborhood">
      </label>

      <!-- zipcode -->
      <label class="item item-input" id="zipcode">
       <span class="input-label">C.P.*</span>
       <input type="tel" ng-model="establish.zipcode" maxlength="5" placeholder="ej. 75555"
       ng-init="establish.zipcode = mySucursal.zipcode">
      </label>

      <!-- Cambiar ciudad -->
      <div id="sucursal-map-cont">
        <label class="item item-button-right" id="neighborhood">
          {{mySucursal.city}}
          <button type="button" class="button button-positive" ng-click="abrirModalMap()">
            Cambiar
          </button>
        </label>
        <div id="sucursal-single-map" ng-if="theresLocation">
        </div>
      </div>

      <!-- Pais -->
      <label class="item item-input item-select">
        <i class="icon ion-ios-location"></i>
        <div class="input-label">País*</div>
        <select name="pais" ng-model="country"
        ng-options="p.name for p in paises track by p.id"
        ng-change="loadStates(country.id)">
          <option value="" disabled selected hidden>-- Selecciona --</option>
        </select>
      </label>

      <!-- estado -->
      <label class="item item-input item-select" ng-show="showState">
        <div class="input-label">Estado*</div>
        <select name="estado" ng-model="state"
        ng-options="e.name for e in estados track by e.id"
        ng-change="loadCities(country.id, state.id)">
          <option value="" disabled selected hidden>-- Selecciona --</option>
        </select>
      </label>

      <!-- ciudad -->
      <label class="item item-input item-select" ng-show="showCity">
        <div class="input-label">Ciudad*</div>
        <select name="ciudad" ng-model="city"
        ng-options="c.name for c in ciudades track by c.id"
        ng-change="asignarCiudad(city)">
          <option value="" disabled selected hidden>-- Selecciona --</option>
        </select>
      </label>

      <!-- schedule -->
      <label class="item item-input" id="schedule">
       <span class="input-label">Horario*</span>
       <input type="text" ng-model="establish.schedule"
        placeholder="ej. lunes a viernes de 8am a 9pm"
        ng-init="establish.schedule = mySucursal.schedule">
      </label>

      <!-- ubicación -->
      <div id="sucursal-map-cont">
        <label class="item item-button-right" id="neighborhood">
          Seleccionar Ubicación
          <button type="button" class="button button-positive" ng-click="abrirModalMap()">
            <i class="icon ion-ios-location"></i>
          </button>
        </label>
        <div id="sucursal-single-map" ng-if="theresLocation">
        </div>
      </div>

      <ion-checkbox ng-repeat="servicio in servicios"
      ng-model="services[$index]" ng-value="servicio.id">{{servicio.name}}</ion-checkbox>


      <!-- business_id -->
      <input type="text" style="display:none" ng-model="establish.business_id"
      ng-init="establish.business_id = mySucursal.business.id">

      <div class="padding">
        <button type="submit" ng-click="enviarSucursal()"
        class="button button-block button-positive">
          Aceptar cambios
        </button>
      </div>

    </form>
  </ion-content>
</ion-modal-view>
